<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8" />
	<title>Sandbox Breathing Halftone</title>
	<style>
		#buttons a{padding:0 6px;text-decoration:underline;color:blue;cursor:pointer}
		#buttons a:hover{text-decoration:none}
	</style>
</head>

<!-- <div id="buttons">
	<a id="mike">Mike</a> <a id="mike">Mike Halftone</a> <a id="meg">Meg</a> <a id="meg">Meg Halftone</a> <a id="blue">Blue</a> <a id="black">Black</a> <a id="removehalftone">Remove Halftone</a>
</div>
-->

<body>
	<div class="canvas-col" style="display: inline-block;">
		<img id="dragcp" class="halftone" photoType="color" photoTag="mike"
			   effectType="halftone" canvasBackgroundColor="black"
				 src="./images/mike_stern_CC_600x620.jpg" data-src="./images/mike_stern_CC_600x620.jpg" />

		<div class="buttons-row" style="">
			<div class="profile-buttons" style="display: inline-block; width: 90px;">
				<div id="buttons">
					<a class="if_image_link_clicked" photoTag="mike" action="new_photo"
					   photoType="color" effectType="halftone"
						 canvasBackgroundColor="black"
						 imgSrc="./images/mike_stern_CC_600x620.jpg"
					>Mike</a>
				</div>
				<div id="buttons">
					<a class="if_image_link_clicked" photoTag="mike" action="new_photo"
					   photoType="halftone" effectType="halftone"
						 canvasBackgroundColor="black"
						 imgSrc="./images/mike_stern_CC_415x567_halftone.png"
					>as Halftone</a>
				</div>
				<div id="buttons">
					<a class="if_image_link_clicked" photoTag="mike" action="new_photo"
					   photoType="halftone" effectType="halftone_copy"
						 canvasBackgroundColor="copied"
						 imgSrc="./images/mike_stern_CC_415x567_halftone.png"
					>Copy Htone</a>
				</div>
			</div>

			<div class="profile-buttons" style="display: inline-block; width: 90px;">
				<div id="buttons">
					<a class="if_image_link_clicked" photoTag="meg" action="new_photo"
					   photoType="color" effectType="halftone"
						 canvasBackgroundColor="black"
						 imgSrc="./images/meg_CC_422x436.jpg"
					>Meg</a>
				</div>
				<div id="buttons">
					<a class="if_image_link_clicked" photoTag="meg" action="new_photo"
					   photoType="halftone" effectType="halftone"
						 canvasBackgroundColor="black"
						 imgSrc="./images/meg_makalou_CC_582x547_halftone.png"
					>as Halftone</a>
				</div>
				<div id="buttons">
					<a class="if_image_link_clicked" photoTag="meg" action="new_photo"
						 photoType="halftone" effectType="halftone_copy"
						 canvasBackgroundColor="copied"
						 imgSrc="./images/meg_makalou_CC_582x547_halftone.png"
					>Copy Htone</a>
				</div>
			</div>

			<div class="profile-buttons" style="display: inline-block; width: 90px;">
				<div id="buttons">
					<a class="">Person3</a>
				</div>
				<div id="buttons">
					<a class="">as Halftone</a>
				</div>
			</div>

			<div class="profile-buttons" style="display: inline-block; width: 90px;">
				<div id="buttons">
					<a class="">Person4</a>
				</div>
				<div id="buttons">
					<a class="">as Halftone</a>
				</div>
			</div>

			<div class="profile-buttons" style="display: inline-block; width: 120px; border-left: 2px black solid;">
				<div id="buttons">
					<a id="blue" style="color: red;">Blue Halftone</a>
				</div>
				<div id="buttons">
					<a id="black" style="color: red;">Black Halftone</a>
				</div>
			</div>

			<div class="profile-buttons" style="display: inline-block; width: 100px; border-left: 2px black solid;">
				<div id="buttons">
					<a id="removehalftone">Remove<br/>&nbsp;Halftone</a>
				</div>
			</div>
		</div>

	</div>

	<div class="prolfile-photo-col" style="display: inline-block; width: 4 00px; margin-left: 10px;">
		<img class="profile-photo" style="width: 130px; height: 130px; margin-left: 0px; margin-bottom: 4px;"
				 src="./images/mike_stern_CC_600x620.jpg" data-src="./images/mike_stern_CC_600x620.jpg" />
		<img class="profile-photo" style="width: 110px; height: 130px; margin-left: 8px; margin-bottom: 4px;"
		 		 src="./images/mike_stern_CC_415x567_halftone.png" data-src="./images/mike_stern_CC_halftone.png" />
		<div style="width: 278px;">
			<div style="margin-bottom: 20px;">
				<div style="">Mike:</div>
				<div style="display: inline-block; width: 138px; text-align: center;">600x620.jpg</div>
				<div style="display: inline-block; width: 130px; text-align: center;">415x567_halftone.png</div>
			</div>
		</div>
		<img class="profile-photo" style="width: 130px; height: 130px; margin-left: 0px; margin-bottom: 4px;"
				 src="./images/meg_CC_422x436.jpg" data-src="./images/meg_CC_422x436.jpg" />
		<img class="profile-photo" style="width: 140px; height: 130px; margin-left: 8px; margin-bottom: 4px;"
				 src="./images/meg_makalou_CC_582x547_halftone.png" data-src="./images/meg_makalou_CC_halftone.png" />
		<div style="width: 278px;">
			<div style="margin-bottom: 20px;">
				<div style="">Meg:</div>
				<div style="display: inline-block; width: 138px; text-align: center;">422x436.jpg</div>
				<div style="display: inline-block; width: 130px; text-align: center;">582x547_halftone.png</div>
			</div>
			<!-- <center>Click on photo to change selection.</center> -->
			<center style="margin-bottom:200px;">&nbsp;</center>
		</div>
	</div>

	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
	<script src="./js/sandbox-breathing-halftone.js"></script>

	<script>
		jQuery(document).ready(function(){
			console.log(" ..*0: html.jQuery(document).ready().");

			function addHalftone( n ) {
				var img = document.querySelector('#dragcp'),
					  $img = jQuery(img);
				console.log(" ..*0a: html.addHalftone() for channel '" + n +
									"'. photoTag: '" + $img.attr('photoTag') +
									"'. photoType: " + $img.attr('photoType') +
									"'. effectType: " + $img.attr('effectType') +
									"'. canvasBackgroundColor: " + $img.attr('canvasBackgroundColor') +
									"'. *");
				halftone = new BreathingHalftone(
					img, {	logLevel: 'info',  // 'none', 'info', 'debug', 'all',
																		 // 'particleInitTrace', 'animationTrace'
									dotSize: 1/100,
									oscAmplitude: 0,
									initVelocity: 1,
									isAdditive: true,
									channels: [n],
									photoType: $img.attr('photoType'),
									photoTag: $img.attr('photoTag'),
									effectType: $img.attr('effectType'),
									canvasBackgroundColor: $img.attr('canvasBackgroundColor'),
								},
				);
			}

			function removeHalftone() {
				console.log(" ..*0b: html.removeHalftone() *");
				if($('#idh').length!==0) {
					$('#idh').remove();
					halftone.destroy();
					delete halftone;
				}
			};

			$('#blue').click( function() {
				console.log(" ..*0c: html.$('#blue').click() *");
				removeHalftone();
				addHalftone('blue');
			});

			$('#black').click( function() {
				console.log(" ..*0d: html.$('#black').click() *");
				removeHalftone();
				addHalftone('lum');
			});

			$('#removehalftone').click( function() {
				console.log(" ..*0e: html.$('#removehalftone').click() *");
				removeHalftone();
			});

			/* <a class="if_image_link_clicked" photoTag="mike" action="new_photo"
				    photoType="color" effectType="halftone"
				    canvasBackgroundColor="black"
				    imgSrc="./images/mike_stern_CC_600x620.jpg"
			   >Mike</a>
			   <a class="if_image_link_clicked" photoTag="mike" action="new_photo"
				    photoType="halftone" effectType="halftone"
				    canvasBackgroundColor="black"
				    imgSrc="./images/mike_stern_CC_halftone.png"
			   >as Halftone</a>
				 <a class="if_image_link_clicked" photoTag="mike" action="new_photo"
						photoType="halftone" effectType="halftone_copy"
						canvasBackgroundColor="copied"
						imgSrc="./images/mike_stern_CC_halftone.png"
				 >Copy Htone</a>
			*/
			function showNewImage( event, $el ) {
				console.log(" ..*0f: html.showNewImage() photoTag: '" + $el.attr('photoTag') +
									  "'. photoType: " + $el.attr('photoType') +
										"'. effectType: " + $el.attr('effectType') +
										"'. canvasBackgroundColor: " + $el.attr('canvasBackgroundColor') +
										"'. imgSrc: '" + $el.attr('imgSrc') +
										"'. *");
				var $img = jQuery('#dragcp'),
				    currentPhotoType = $img.attr('photoType'),
						currentPhotoTag  = $img.attr('photoTag');
				$img.attr('photoType', $el.attr('photoType'));
				$img.attr('photoTag', $el.attr('photoType'));
				$img.attr('canvasBackgroundColor', $el.attr('canvasBackgroundColor'));
				$img.attr('effectType', $el.attr('effectType'));
				$img.attr('src', $el.attr('imgSrc'));
				$img.attr('data-src', $el.attr('imgSrc'));

				if ( $el.attr('effectType') == 'halftone_copy') {
					console.log(" ..*0fa: html.showNewImage() Copy Halftone *");
					var transition_delay = ( currentPhotoType == $img.attr('photoType') &&
																	 currentPhotoTag  == $img.attr('photoTag')
																	 ? 0 : 1500 );
					setTimeout(function() {
						addHalftone('blue');
					}, transition_delay);
				}
			};

			$.each( jQuery('.if_image_link_clicked').toArray(), function( index, el) {
				jQuery(el).click( function() {
					var $el = jQuery(el),
							action = $el.attr('action'),
							photoTag = $el.attr('photoTag');
					console.log(" ..*0g: html.$('#if_image_link_clicked').click() action: '" +
											$el.attr('action') + "'. photoTag: '" + $el.attr('photoTag') + "'. *");
					removeHalftone();
					if ( action == 'new_photo' ) {
						showNewImage( this, $el );
					}
				}); // end jQuery(el).click
			}); // end $.each

		}); // end: jQuery(document).ready
	</script>

</body>
</html>

<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8" />
	<title>Sandbox Breathing Halftone</title>
	<style>
		#buttons a{padding:0 6px;text-decoration:underline;color:blue;cursor:pointer}
		#buttons a:hover{text-decoration:none}
	</style>
</head>

<body>
	<div class="canvas-col" style="display: inline-block;">
		<img id="dragcp" class="halftone" photoType="color" photoTag="meg" effectType="halftone"
				 src="./images/meg_CC_422x436.jpg" data-src="./images/meg_CC_422x436.jpg" />

		<div class="buttons-row" style="">
			<div class="profile-buttons" style="display: inline-block; width: 90px;">
				<div id="buttons">
					<a class="if_image_link_clicked" photoTag="mike" action="new_photo"
					   photoType="color" effectType="halftone"
						 imgSrc="./images/mike_stern_CC_600x620.jpg"
					>Mike</a>
				</div>
				<div id="buttons">
					<a class="if_image_link_clicked" photoTag="mike" action="new_photo"
					   photoType="halftone" effectType="halftone"
						 imgSrc="./images/mike_stern_CC_415x567_halftone.png"
						 data-src="./images/mike_stern_CC_600x620.jpg"
					>as Halftone</a>
				</div>
				<div id="buttons">
					<a class="if_image_link_clicked" photoTag="mike" action="new_photo"
						 effectType="copy_halftone"
						 imgSrc="./images/mike_stern_CC_415x567_halftone.png"
					>Copy Htone</a>
				</div>
			</div>

			<div class="profile-buttons" style="display: inline-block; width: 90px;">
				<div id="buttons">
					<a class="if_image_link_clicked" photoTag="meg" action="new_photo"
					 	 photoType="color" effectType="halftone"
						 imgSrc="./images/meg_CC_422x436.jpg"
					>Meg</a>
				</div>
				<div id="buttons">
					<a class="if_image_link_clicked" photoTag="meg" action="new_photo"
					   photoType="halftone" effectType="halftone"
						 imgSrc="./images/meg_makalou_CC_582x547_halftone.png"
						 data-src="./images/meg_CC_422x436.jpg"
					>as Halftone</a>
				</div>
				<div id="buttons">
					<a class="if_image_link_clicked" photoTag="meg" action="new_photo"
						  effectType="copy_halftone"
							imgSrc="./images/meg_makalou_CC_582x547_halftone.png"
					>Copy Htone</a>
				</div>
			</div>

			<div class="profile-buttons" style="display: inline-block; width: 90px;">
				<div id="buttons">
					<a class="">Person3</a>
				</div>
				<div id="buttons">
					<a class="">as Halftone</a>
				</div>
				<div id="buttons">
					<a class="">&nbsp;</a>
				</div>
			</div>

			<div class="profile-buttons" style="display: inline-block; width: 90px;">
				<div id="buttons">
					<a class="">Person4</a>
				</div>
				<div id="buttons">
					<a class="">as Halftone</a>
				</div>
				<div id="buttons">
					<a class="">&nbsp;</a>
				</div>
			</div>

			<div class="profile-buttons" style="display: inline-block; width: 120px; border-left: 2px white solid;">
				<div id="buttons">
					<a id="blue" style="color: red;">Blue Halftone</a>
				</div>
				<div id="buttons">
					<a id="cCorp" style="color: red;">cCorp Halftone</a>
				</div>
				<div id="buttons">
					<a id="tracePixell" style="color: black;">Trace Pixell</a>
				</div>
			</div>

			<div class="profile-buttons" style="display: inline-block; width: 100px; border-left: 2px white solid;">
				<div id="buttons">
					<a id="removehalftone">Remove<br/>&nbsp;Halftone</a>
				</div>
			</div>
		</div>

	</div>

	<div class="prolfile-photo-col" style="display: inline-block; width: 4 00px; margin-left: 10px;">
		<img class="profile-photo" style="width: 130px; height: 130px; margin-left: 0px; margin-bottom: 4px;"
				 src="./images/mike_stern_CC_600x620.jpg" data-src="./images/mike_stern_CC_600x620.jpg" />
		<img class="profile-photo" style="width: 110px; height: 130px; margin-left: 8px; margin-bottom: 4px;"
		 		 src="./images/mike_stern_CC_415x567_halftone.png" data-src="./images/mike_stern_CC_halftone.png" />
		<div style="width: 278px;">
			<div style="margin-bottom: 20px;">
				<div style="">Mike:</div>
				<div style="display: inline-block; width: 138px; text-align: center;">600x620.jpg</div>
				<div style="display: inline-block; width: 130px; text-align: center;">415x567_halftone.png</div>
			</div>
		</div>
		<img class="profile-photo" style="width: 130px; height: 130px; margin-left: 0px; margin-bottom: 4px;"
				 src="./images/meg_CC_422x436.jpg" data-src="./images/meg_CC_422x436.jpg" />
		<img class="profile-photo" style="width: 140px; height: 130px; margin-left: 8px; margin-bottom: 4px;"
				 src="./images/meg_makalou_CC_582x547_halftone.png" data-src="./images/meg_makalou_CC_halftone.png" />
		<div style="width: 278px;">
			<div style="margin-bottom: 20px;">
				<div style="">Meg:</div>
				<div style="display: inline-block; width: 138px; text-align: center;">422x436.jpg</div>
				<div style="display: inline-block; width: 130px; text-align: center;">582x547_halftone.png</div>
			</div>
			<!-- <center>Click on photo to change selection.</center> -->
			<center style="margin-bottom:200px;">&nbsp;</center>
		</div>
	</div>

	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
	<script src="./js/sandbox-breathing-halftone.js"></script>

	<script>
		jQuery(document).ready(function(){
			console.log(" ..*0: html.jQuery(document).ready().");

			function addHalftone( img, options ) {
				console.log(" ..*0a: html.addHalftone() for channel '" + options.channels[0] +
									"'. photoTag: '" + options.photoTag +
									"'. photoType: " + options.photoType +
									"'. effectType: " + options.effectType +
									"'. canvasBackgroundColor: " + options.canvasBackgroundColor +
									"'. dotsColor: " + options.dotsColor +
									"'. tracePixell: " + options.isTracePixell +
									"'. *");
			 	options.logLevel = 'info'; // logLevel: 'none', 'info', 'all',
							 										 // 'particleInitTrace', 'animationTrace'
				halftone = new BreathingHalftone( img, options );
			}

			function removeHalftone() {
				console.log(" ..*0b: html.removeHalftone() *");
				if($('#idh').length!==0) {
					$('#idh').remove();
					halftone.destroy();
					delete halftone;
				}
			};

			$('#blue').click( function() {
				console.log(" ..*0c: html.$('#blue').click() *");
				removeHalftone();
				var img = document.querySelector('#dragcp'),
						$img = jQuery(img);
				addHalftone( img, {
					dotSize: 1/100,
					oscAmplitude: 0,
					initVelocity: 1,
					isAdditive: true,
					channels: [ 'blue' ],
					photoType: $img.attr('photoType'),
					photoTag: $img.attr('photoTag'),
					effectType: "halftone",
					canvasBackgroundColor: 'white',
					dotsColor: 'calculated',
					maxAnimationCycles: 'calculated',
					isTracePixell: false,
				});
			});

			$('#cCorp').click( function() {
				console.log(" ..*0d: html.$('#cCorp').click() *");
				removeHalftone();
				var img = document.querySelector('#dragcp'),
						$img = jQuery(img);
				addHalftone( img, {
					dotSize: 1/150,
					oscAmplitude: 0,
					initVelocity: 1,
					isAdditive: true,
					channels: [ 'blue' ],
					photoType: $img.attr('photoType'),
					photoTag: $img.attr('photoTag'),
					effectType: $img.attr('effectType'),
					canvasBackgroundColor: "#E7F1F7",
					dotsColor: '#70C0EF',
					maxAnimationCycles: 600,
					isTracePixell: false,
				});
			});

			$('#tracePixell').click( function() {
				// NOTE: if logLevel = 'none' then no trace, just restricted num of
				// pixells selected via tracePixellParticles. Some of those may be rejected
				// due to their rgb values.
				// If logLevel = 'particleInitTrace' only the initParticles() loop is traced.
				console.log(" ..*0e: html.$('#tracePixell').click() *");
				removeHalftone();
				var img = document.querySelector('#dragcp'),
						$img = jQuery(img);
				addHalftone( img, {
					isTracePixell: true,
					tracePixellParticles: 1,
					position_x: 0,
					position_y: 0,
					dotsColor: 'red',
					channels: [ 'blue' ],
					photoTag: $img.attr('photoTag'),
					photoType: $img.attr('photoType'),
					effectType: "halftone",
					canvasBackgroundColor: 'white',
					maxAnimationCycles: 300,
					dotSize: 1/100,
					oscAmplitude: 0,
					initVelocity: 1,
					isAdditive: true,
				});
			});

			$('#removehalftone').click( function() {
				console.log(" ..*0f: html.$('#removehalftone').click() *");
				removeHalftone();
			});


			function showNewImage( event, $el ) {
				console.log(" ..*0g: html.showNewImage() photoTag: '" + $el.attr('photoTag') +
									  "'. photoType: " + $el.attr('photoType') +
										"'. effectType: " + $el.attr('effectType') +
										"'. canvasBackgroundColor: " + $el.attr('canvasBackgroundColor') +
										"'. dotsColor: " + $el.attr('dotsColor') +
										"'. imgSrc: '" + $el.attr('imgSrc') +
										"'. *");
				var $img = jQuery('#dragcp'),
				    currentPhotoType = $img.attr('photoType'),
						currentPhotoTag  = $img.attr('photoTag');
				$img.attr('photoType', $el.attr('photoType'));
				$img.attr('photoTag', $el.attr('photoType'));
				$img.attr('canvasBackgroundColor', $el.attr('canvasBackgroundColor'));
				$img.attr('dotsColor', $el.attr('dotsColor'));
				$img.attr('effectType', $el.attr('effectType'));
				$img.attr('src', $el.attr('imgSrc'));
				if ( $img.attr('photoType') == "halftone" ) {
					$img.attr('data-src', $el.attr('data-src'));
				} else {
					$img.attr('data-src', $img.attr('src'));
				}

				if ( $el.attr('effectType') == 'halftone_copy') {
					console.log(" ..*0ga: html.showNewImage() Copy Halftone *");
					var transition_delay = ( currentPhotoType == $img.attr('photoType') &&
																	 currentPhotoTag  == $img.attr('photoTag')
																	 ? 0 : 1500 );
					setTimeout(function() {
						addHalftone( img, {
							channels: [ 'blue' ],
							photoTag: $img.attr('photoTag'),
							isJustCopy: true,
						});
					}, transition_delay);
				}
			};

			$.each( jQuery('.if_image_link_clicked').toArray(), function( index, el) {
				jQuery(el).click( function() {
					var $el = jQuery(el),
							action = $el.attr('action'),
							photoTag = $el.attr('photoTag');
					console.log(" ..*0h: html.$('#if_image_link_clicked').click() action: '" +
											$el.attr('action') + "'. photoTag: '" + $el.attr('photoTag') + "'. *");
					removeHalftone();
					if ( action == 'new_photo' ) {
						showNewImage( this, $el );
					}
				}); // end jQuery(el).click
			}); // end $.each

		}); // end: jQuery(document).ready
	</script>

</body>
</html>
